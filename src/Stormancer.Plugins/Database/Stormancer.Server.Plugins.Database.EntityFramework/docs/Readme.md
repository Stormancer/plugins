# Entity framework core

The entity framework core plugin provides access to an extensible Entity framework DB context configured through the app configuration and additional plugins.


# Migrations

Migrations are used to generate SQL scripts that initialize then update the dabatase schema whenever it needs to be updated by application changes.

Migrations are generated by using the EF core migration tool. To integrate with the tool, the app has to provide an implementation of `IDesignTimeDbContextFactory<AppDbContext>`. https://learn.microsoft.com/en-us/ef/core/cli/dbcontext-creation?tabs=dotnet-core-cli#from-a-design-time-factory

Create a file named `dbContextFactory.cs` in the application project.

Add the following code in it:

        public class DbContextFactory: IDesignTimeDbContextFactory<AppDbContext>
        {
            public AppDbContext CreateDbContext(string[] args)
            {
                var host = ServerApplication.CreateHost(builder => builder
                       .Configure(args)
                       .AddAllStartupActions()
                 );
                 using var scope host.DependencyResolver.CreateRequestScope();
                return scope.Resolve<DbContextAccessor>().GetDbContextAsync().Result;
            }
        }